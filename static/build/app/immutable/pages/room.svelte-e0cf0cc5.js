import{S as A,i as E,s as I,l as d,g as _,e as g,t as B,k as S,c as k,a as N,h as z,d as u,m as T,b as $,J as q,j as F,R as J,n as w,T as P,x as y,y as v,z as D,p as h,q as G,r as p,C as R,w as H,o as K}from"../chunks/index-60b577e4.js";import{T as L,R as O}from"../chunks/RoomSelector-2176b978.js";function C(s,e,o){const a=s.slice();return a[2]=e[o],a[4]=o,a}function M(s){let e,o=s[2].fileName+"",a,t,l,n,i;return{c(){e=g("a"),a=B(o),n=S(),i=g("br"),this.h()},l(r){e=k(r,"A",{href:!0,download:!0});var m=N(e);a=z(m,o),m.forEach(u),n=T(r),i=k(r,"BR",{}),this.h()},h(){$(e,"href",t=`/room/get/${s[0]}/${s[4]}`),$(e,"download",l=s[2].fileName)},m(r,m){_(r,e,m),q(e,a),_(r,n,m),_(r,i,m)},p(r,m){m&2&&o!==(o=r[2].fileName+"")&&F(a,o),m&3&&t!==(t=`/room/get/${r[0]}/${r[4]}`)&&$(e,"href",t),m&2&&l!==(l=r[2].fileName)&&$(e,"download",l)},d(r){r&&u(e),r&&u(n),r&&u(i)}}}function j(s,e){let o,a,t=e[2]!=null&&M(e);return{key:s,first:null,c(){o=d(),t&&t.c(),a=d(),this.h()},l(l){o=d(),t&&t.l(l),a=d(),this.h()},h(){this.first=o},m(l,n){_(l,o,n),t&&t.m(l,n),_(l,a,n)},p(l,n){e=l,e[2]!=null?t?t.p(e,n):(t=M(e),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},d(l){l&&u(o),t&&t.d(l),l&&u(a)}}}function Q(s){let e,o=[],a=new Map,t=s[1].files;const l=n=>n[4];for(let n=0;n<t.length;n+=1){let i=C(s,t,n),r=l(i);a.set(r,o[n]=j(r,i))}return{c(){e=g("main");for(let n=0;n<o.length;n+=1)o[n].c()},l(n){e=k(n,"MAIN",{});var i=N(e);for(let r=0;r<o.length;r+=1)o[r].l(i);i.forEach(u)},m(n,i){_(n,e,i);for(let r=0;r<o.length;r+=1)o[r].m(e,null)},p(n,[i]){i&3&&(t=n[1].files,o=J(o,i,l,1,n,t,a,e,P,j,null,C))},i:w,o:w,d(n){n&&u(e);for(let i=0;i<o.length;i+=1)o[i].d()}}}function U(s,e,o){let{roomName:a}=e,{roomData:t}=e;return s.$$set=l=>{"roomName"in l&&o(0,a=l.roomName),"roomData"in l&&o(1,t=l.roomData)},[a,t]}class V extends A{constructor(e){super(),E(this,e,U,Q,I,{roomName:0,roomData:1})}}function W(s){let e,o;return e=new V({props:{roomName:s[1],roomData:s[0]}}),{c(){y(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,t){D(e,a,t),o=!0},p(a,t){const l={};t&2&&(l.roomName=a[1]),t&1&&(l.roomData=a[0]),e.$set(l)},i(a){o||(p(e.$$.fragment,a),o=!0)},o(a){h(e.$$.fragment,a),o=!1},d(a){R(e,a)}}}function X(s){let e,o;return e=new O({}),{c(){y(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,t){D(e,a,t),o=!0},p:w,i(a){o||(p(e.$$.fragment,a),o=!0)},o(a){h(e.$$.fragment,a),o=!1},d(a){R(e,a)}}}function Y(s){let e,o,a,t,l,n;o=new L({});const i=[X,W],r=[];function m(f,c){return f[2]?0:1}return t=m(s),l=r[t]=i[t](s),{c(){e=g("main"),y(o.$$.fragment),a=S(),l.c()},l(f){e=k(f,"MAIN",{});var c=N(e);v(o.$$.fragment,c),a=T(c),l.l(c),c.forEach(u)},m(f,c){_(f,e,c),D(o,e,null),q(e,a),r[t].m(e,null),n=!0},p(f,[c]){let b=t;t=m(f),t===b?r[t].p(f,c):(K(),h(r[b],1,1,()=>{r[b]=null}),G(),l=r[t],l?l.p(f,c):(l=r[t]=i[t](f),l.c()),p(l,1),l.m(e,null))},i(f){n||(p(o.$$.fragment,f),p(l),n=!0)},o(f){h(o.$$.fragment,f),h(l),n=!1},d(f){f&&u(e),R(o),r[t].d()}}}function Z(s,e,o){let a,t,l,n=!0;const i=async f=>{let c=await fetch(`/room/get/${l}`);o(0,t=await c.json())},r=async f=>{a=(await(await fetch("/info")).json()).clientConfig},m=f=>{location.href="/"};return H(async f=>{if(o(1,l=location.hash.slice(1)),l==""){m();return}i(),await r(),o(2,n=!1),setInterval(i,a.timings.refreshDelay*1e3)}),[t,l,n]}class te extends A{constructor(e){super(),E(this,e,Z,Y,I,{})}}export{te as default};
